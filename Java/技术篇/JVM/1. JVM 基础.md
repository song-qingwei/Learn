### 一、什么是JVM？

---------------------

#### 1. 概念

虚拟机是一种抽象化的计算机，通过在实际的计算机上仿真模拟各种计算机功能来实现的。Java虚拟机有自己完善的硬体架构，如处理器、堆栈、寄存器等，还具有相应的指令系统。JVM屏蔽了与具体操作系统平台相关的信息，使得Java程序只需生成在Java虚拟机上运行的目标代码（字节码），就可以在多种平台上不加修改地运行。

```
Write Once Run Everywhere
```

#### 2. 从进程角度解释JVM

我们知道，虚拟机是运行在操作系统之中的，那么什么东西才能在操作系统中运行呢？当然是进程，因为进程是操作系统中的执行单位。

其实一个命令对应一个可执行的二进制文件，当敲下命令并且回车后，就会创建一个进程，加载对应的可执行文件到进程的地址空间中，并且执行其中的指令。

```java
public class HellWorld {
    public static void main(String[] args) {
        System.out.print("Hello World!");
    }
}
```

```java
// 编译
javac HelloWorld.java
// 运行
java -classpath . HelloWorld
```

从上面的过程可以看到， 我们在运行Java版的 HelloWorld 程序的时候， 敲入的命令并不是 ./HelloWorld.class 。因为class文件并不是可以直接被操作系统识别的二进制可执行文件 。我们敲入的是java这个命令。 这个命令说明， 我们首先启动的是一个叫做java的程序， 这个java程序在运行起来之后就是一个JVM进程实例。

上面的命令执行流程是这样的：

```reStructuredText
java命令首先启动虚拟机进程，虚拟机进程成功启动后，读取参数“HelloWorld”，把他作为初始类加载到内存，对这个类进行初始化和动态链接，然后从这个类的main方法开始执行。也就是说我们的.class文件不是直接被系统加载后直接在cpu上执行的，而是被一个叫做虚拟机的进程托管的。首先必须虚拟机进程启动就绪，然后由虚拟机中的类加载器加载必要的class文件，包括jdk中的基础类（如String和Object等），然后由虚拟机进程解释class字节码指令，把这些字节码指令翻译成本机cpu能够识别的指令，才能在cpu上运行。
```

