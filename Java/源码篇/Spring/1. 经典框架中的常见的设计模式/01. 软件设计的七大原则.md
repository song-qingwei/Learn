[TOC]

### 软件设计的七大原则及设计模式

-------------

#### 七大原则

-------------

##### 1. 开-闭原则（Open-Closed Principle）缩写为：OCP

你设计的时候，时刻要考虑，尽量让这个类是足够好，写好了就不要去修改了，如果新需求来，我们增加一些类就完事了，原来的代码 能不动则不动。这个原则有两个特性，一个是说“对于扩展是开放的”，另一个是说“对于更改是封闭的”。面对需求，对程序的改动是通过增加新代码进行的，而 不是更改现有的代码。这就是“开-闭原则”的精神所在。

**优点：** 提高软件系统的可复用性及可维护性。

**关键：** 实现“开-闭”原则的关键步骤就是抽象化。

##### 2. 里氏替换原则（Liskov Substitution Principle）缩写为：LSP

一个软件实体如果使用的是一个父类的话，那么一定适用于其子类，而且它察觉不出父类对象和子类对象的区别，也就是说，在软件里面，把父类都替换成它的子类，程序的行为没有变化。

例如：在生物学上，企鹅也算一种鸟类，但在编程世界中，企鹅却不能继承鸟类。在面向对象设计时，子类拥有父类所有非`private`的属性和行为。

更通俗的讲：子类可以扩展父类的功能，但不能改变父类原有的功能。它的含义包括以下4层：

1. 子类可以实现父类的抽象方法，但不能覆盖父类的非抽象方法；
2. 子类可以增加自己特有的方法；
3. 子类的方法重载父类的方法时，方法的前置条件（形参）要比父类的形参更宽松；
4. 当子类实现父类的抽象方法时，方法的后置条件（方法的返回值）要比父类更加严格；

##### 3. 依赖倒置原则（Dependence Inversion Principle）

高层模块不应依赖于低层模块，二者都应该依赖其抽象；抽象不应该依赖于细节，细节应该依赖于抽象。即针对接口编程，不要针对实现编程。

依赖倒置的中心思想是面向接口编程，传递依赖关系有三种方式，接口传递、构造方法传递和 setter 方法传递。

在实际开发过程中，我们一般做到如下三点：

1. 低层模块尽可能要有抽象类或接口，或者两者都有；
2. 声明的变量类型尽量是抽象类或接口；
3. 使用继承时遵循里氏替换原则；

##### 4. 接口隔离原则（Interface Segregation Principle）

建立单一接口，不要建立庞大臃肿的接口，尽量细化接口，接口中的方法尽量少。也就是说，我们要为各个类建立专用的接口，而不要试图去建立一个很庞大的接口供所有依赖它的类去调用。在程序设计中，依赖几个专用的接口要比依赖一个综合的接口更灵活。通过分散定义多个接口，可以预防外来变更的扩散，提高系统的灵活性和可维护性。

采用接口隔离原则对接口进行约束时，要注意以下几点：

1. 接口尽量小，但是要有限度。对接口进行细化可以提高程序设计灵活性是不挣的事实，但是如果过小，则会造成接口数量过多，使设计复杂化。所以一定要适度。
2. 为依赖接口的类定制服务，只暴露给调用的类它需要的方法，它不需要的方法则隐藏起来。只有专注地为一个模块提供定制服务，才能建立最小的依赖关系。
3. 提高内聚，减少对外交互。使接口用最少的方法去完成最多的事情。

##### 5. 合成复用原则（Composite Reuse Principle）

尽量使用合成和聚合，而不是使用继承达到复用的目的。

##### 6. 迪米特法则（Demeter Principle）

它强调了类之间的松耦合，类之间的耦合越弱,越有利于复用，一个处在弱耦合的类被修改，不会对有关系的类造成影响，也就是说，信息的隐藏促进了软件的复用。

自从我们接触编程开始，就知道了软件编程的总的原则：低耦合，高内聚。无论是面向过程编程还是面向对象编程，只有使各个模块之间的耦合尽量的低，才能提高代码的复用率。

迪米特法则又叫最少知道原则。通俗的来讲，就是一个类对自己依赖的类知道的越少越好。也就是说，对于被依赖的类来说，无论逻辑多么复杂，都尽量地的将逻辑封装在类的内部，对外除了提供的`public`方法，不对外泄漏任何信息。

迪米特法则还有一个更简单的定义：只与直接的朋友通信。首先来解释一下什么是直接的朋友：每个对象都会与 其他对象有耦合关系，只要两个对象之间有耦合关系，我们就说这两个对象之间是朋友关系。耦合的方式很多，依赖、关联、组合、聚合等。其中，我们称出现成员变量、方法参数、方法返回值中的类为直接的朋友，而出现在局部变量中的类则不是直接的朋友。也就是说，陌生的类最好不要作为局部变量的形式出现在类的内部。

##### 7. 单一职责原则（Single Responsibility Principle）

不要存在多于一个导致类变更的原因。通俗的说，即一个类只负责一项职责，应该仅有一个引起它变化的原因。

遵循单一职责原的优点有：

1. 可以降低类的复杂度，一个类只负责一项职责，其逻辑肯定要比负责多项职责简单的多；
2. 提高类的可读性，提高系统的可维护性；
3. 变更引起的风险降低，变更是必然的，如果单一职责原则遵守的好，当修改一个功能时，可以显著降低对其他功能的影响。

#### 设计模式

-----------------

维基百科：https://en.wikipedia.org/wiki/Design_Patterns#Patterns_by_Type

推荐书籍《大话设计模式》

推荐书籍《Head First设计模式》

推荐书籍《设计模式-可复用面向对象软件的基础》

推荐书籍《Effective Java》

